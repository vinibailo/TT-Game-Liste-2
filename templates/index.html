<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Editor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.13/dist/cropper.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.5.13/dist/cropper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
</head>
<body>
    <div id="toast" role="status" aria-live="polite"></div>
    <header class="editor-header">
        <div class="header-main">
            <div class="header-info">
                <h1 id="game-name"></h1>
                <div class="header-meta">
                    <span class="meta-label">Game ID</span>
                    <span id="game-id" class="meta-value">â€”</span>
                </div>
            </div>
            <div class="progress-indicator">
                <div class="progress-metrics">
                    <span id="progress-count" class="progress-count">0/0</span>
                    <span id="progress-percent" class="progress-percent">0.00%</span>
                </div>
                <div class="progress-bar"><div id="progress"></div></div>
            </div>
        </div>
        <nav class="action-row" id="action-bar" aria-label="Game actions">
            <button type="button" id="previous" class="btn btn-blue" aria-label="Previous">
                <span class="material-symbols-rounded btn-icon" aria-hidden="true">chevron_left</span>
                <span class="btn-label">Previous</span>
            </button>
            <button type="button" id="next" class="btn btn-blue" aria-label="Next">
                <span class="material-symbols-rounded btn-icon" aria-hidden="true">chevron_right</span>
                <span class="btn-label">Next</span>
            </button>
            <button type="button" id="save" class="btn btn-green" aria-label="Save" data-default-label="Save">
                <span class="material-symbols-rounded btn-icon" aria-hidden="true">save</span>
                <span class="btn-label">Save</span>
            </button>
            <button type="button" id="skip" class="btn btn-yellow" aria-label="Skip">
                <span class="material-symbols-rounded btn-icon" aria-hidden="true">skip_next</span>
                <span class="btn-label">Skip</span>
            </button>
            <button type="button" id="reset" class="btn btn-red" aria-label="Reset">
                <span class="material-symbols-rounded btn-icon" aria-hidden="true">refresh</span>
                <span class="btn-label">Reset</span>
            </button>
        </nav>
    </header>
    <main class="editor-body">
        <section class="details-column">
            <div class="details-layout">
                <form id="game-form">
                    <div class="field-grid">
                        <label>Title
                            <input type="text" id="name" autocomplete="off" />
                        </label>
                        <label>First Launch Date
                            <input type="text" id="first-launch" autocomplete="off" />
                        </label>
                    </div>
                    <div class="summary-section">
                        <div class="summary-header">
                            <label for="summary">Summary</label>
                            <div class="summary-actions">
                                <button type="button" id="expand-summary" class="btn btn-outline">Expand</button>
                                <button type="button" id="generate-summary" class="btn btn-outline">Gerar Resumo</button>
                            </div>
                        </div>
                        <textarea id="summary"></textarea>
                    </div>
                    <div class="chip-field">
                        <label for="platforms">Platforms</label>
                        <select id="platforms" multiple></select>
                    </div>
                    <div class="chip-grid">
                        <div class="chip-field">
                            <label for="genres">Genres</label>
                            <select id="genres" multiple aria-label="Genres"></select>
                        </div>
                        <div class="chip-field">
                            <label for="modes">Game Modes</label>
                            <select id="modes" multiple aria-label="Game modes"></select>
                        </div>
                    </div>
                    <section class="field-card" id="meta-panel">
                        <h2 class="field-card-title">Additional metadata</h2>
                        <div class="field-accordion-content">
                            <label>Category
                                <select id="category"></select>
                            </label>
                            <label>Developers
                                <input type="text" id="developers" autocomplete="off" />
                            </label>
                            <label>Publishers
                                <input type="text" id="publishers" autocomplete="off" />
                            </label>
                        </div>
                    </section>
                </form>
                <aside class="preview-panel" aria-label="Cropped preview">
                    <h3>Preview</h3>
                    <img id="preview" alt="Cropped preview" />
                </aside>
            </div>
        </section>
        <aside class="image-column">
            <input type="file" id="imageUpload" accept="image/*" />
            <div class="image-toolbar">
                <label for="imageUpload" class="btn btn-outline">Choose File</label>
                <button type="button" id="revert-image" class="btn btn-outline">Revert Image</button>
            </div>
            <div class="image-panel">
                <div class="image-wrapper">
                    <img id="image" alt="Cover image workspace" />
                    <div id="image-resolution" class="resolution-label"></div>
                </div>
            </div>
        </aside>
    </main>
    <script>
        window.categoriesList = {{ categories|tojson }};
        window.platformsList = {{ platforms|tojson }};
    </script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
