<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Editor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.13/dist/cropper.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.5.13/dist/cropper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
</head>
<body>
    <div id="toast" role="status" aria-live="polite"></div>
    <header class="editor-header">
        <div class="header-main">
            <div class="header-left">
                <div class="header-info">
                    <h1 id="game-name"></h1>
                    <div class="header-meta">
                        <span class="meta-label">Game ID</span>
                        <span id="game-id" class="meta-value">â€”</span>
                    </div>
                </div>
                <nav class="action-row" id="action-bar" aria-label="Game actions">
                    <button type="button" id="previous" class="btn btn-blue" aria-label="Previous">
                        <span class="btn-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M15.75 19.5 8.25 12l7.5-7.5" />
                            </svg>
                        </span>
                        <span class="btn-label">Previous</span>
                    </button>
                    <button type="button" id="next" class="btn btn-blue" aria-label="Next">
                        <span class="btn-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                            </svg>
                        </span>
                        <span class="btn-label">Next</span>
                    </button>
                    <button type="button" id="save" class="btn btn-green" aria-label="Save">
                        <span class="btn-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M5 3h10.5l3.5 3.5V21H5z" />
                                <path d="M9 3v6h6V3" />
                                <path d="M9 13h6v8H9z" />
                            </svg>
                        </span>
                        <span class="btn-label">Save</span>
                    </button>
                    <button type="button" id="skip" class="btn btn-yellow" aria-label="Skip">
                        <span class="btn-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m7 5 7 7-7 7" />
                                <path d="M17 5v14" />
                            </svg>
                        </span>
                        <span class="btn-label">Skip</span>
                    </button>
                    <button type="button" id="reset" class="btn btn-red" aria-label="Reset">
                        <span class="btn-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 6a8 8 0 1 0 2.344 5.657" />
                                <path d="M20 6h-5" />
                                <path d="M20 6v5" />
                            </svg>
                        </span>
                        <span class="btn-label">Reset</span>
                    </button>
                </nav>
            </div>
            <div class="header-right">
                <div class="header-preview">
                    <img id="preview" alt="Cropped preview" />
                </div>
                <div class="progress-indicator">
                    <div class="progress-metrics">
                        <span id="progress-count" class="progress-count">0/0</span>
                        <span id="progress-percent" class="progress-percent">0.00%</span>
                    </div>
                    <div class="progress-bar"><div id="progress"></div></div>
                </div>
            </div>
        </div>
    </header>
    <main class="editor-body">
        <section class="details-column">
            <form id="game-form">
                <div class="field-grid">
                    <label>Title
                        <input type="text" id="name" autocomplete="off" />
                    </label>
                    <label>First Launch Date
                        <input type="text" id="first-launch" autocomplete="off" />
                    </label>
                </div>
                <div class="summary-section">
                    <div class="summary-header">
                        <label for="summary">Summary</label>
                        <button type="button" id="generate-summary" class="btn btn-outline">Gerar Resumo</button>
                    </div>
                    <textarea id="summary"></textarea>
                </div>
                <div class="chip-field">
                    <label for="platforms">Platforms</label>
                    <select id="platforms" multiple></select>
                </div>
                <div class="chip-grid">
                    <div class="chip-field">
                        <label for="genres">Genres</label>
                        <select id="genres" multiple aria-label="Genres"></select>
                    </div>
                    <div class="chip-field">
                        <label for="modes">Game Modes</label>
                        <select id="modes" multiple aria-label="Game modes"></select>
                    </div>
                </div>
                <details class="field-accordion" id="meta-accordion">
                    <summary>Additional metadata</summary>
                    <div class="field-accordion-content">
                        <label>Category
                            <select id="category"></select>
                        </label>
                        <label>Developers
                            <input type="text" id="developers" autocomplete="off" />
                        </label>
                        <label>Publishers
                            <input type="text" id="publishers" autocomplete="off" />
                        </label>
                    </div>
                </details>
            </form>
        </section>
        <aside class="image-column">
            <input type="file" id="imageUpload" accept="image/*" />
            <div class="image-toolbar">
                <label for="imageUpload" class="btn btn-outline">Choose File</label>
                <button type="button" id="revert-image" class="btn btn-outline">Revert Image</button>
            </div>
            <div class="image-panel">
                <div class="image-wrapper">
                    <img id="image" alt="Cover image workspace" />
                    <div id="image-resolution" class="resolution-label"></div>
                </div>
            </div>
        </aside>
    </main>
    <script>
        window.categoriesList = {{ categories|tojson }};
        window.platformsList = {{ platforms|tojson }};
    </script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
